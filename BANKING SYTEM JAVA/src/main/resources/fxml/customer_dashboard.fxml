<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.bank.controller.CustomerDashboardController"
            prefWidth="1300" prefHeight="750"
            style="-fx-background-color: #F5F7FA;">


    <!-- ========================================================= -->
    <!-- ======================== SIDEBAR ========================= -->
    <!-- ========================================================= -->
    <left>
        <VBox spacing="18" alignment="TOP_CENTER"
              style="-fx-background-color: #0F2B21; -fx-padding: 35 16;">

            <Label text="TH3FATH3R BANK"
                   style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: white;" />

            <Separator style="-fx-background-color: rgba(255,255,255,0.3);" />

            <!-- Sidebar Button Style (stylesheet removed from FXML to avoid FXMLLoader type issues) -->

            <Button fx:id="dashboardBtn" text="Dashboard"
                    onAction="#showDashboard"
                    styleClass="side-btn"/>

            <Button fx:id="sendMoneyBtn" text="Send Money"
                    onAction="#showSendMoney"
                    styleClass="side-btn"/>

            <Button fx:id="transactionsBtn" text="Transactions"
                    onAction="#handleShowTransactions"
                    styleClass="side-btn"/>

            <Button fx:id="accountsBtn" text="Accounts"
                    onAction="#showAccounts"
                    styleClass="side-btn"/>

            <Region VBox.vgrow="ALWAYS"/>

                <Button text="Profile"
                    onAction="#handleProfile"
                    style="-fx-background-color: #184933; -fx-text-fill: white; -fx-padding: 8 20; -fx-background-radius: 10;" />

            <Button text="Logout"
                    onAction="#handleLogout"
                    style="-fx-background-color: #C0392B; -fx-text-fill: white; -fx-padding: 8 20; -fx-background-radius: 10;" />
        </VBox>
    </left>



    <!-- ========================================================= -->
    <!-- ====================== MAIN CONTENT ====================== -->
    <!-- ========================================================= -->
    <center>

        <StackPane fx:id="contentArea" style="-fx-padding: 30;">


            <!-- ====================== DASHBOARD ====================== -->
            <VBox fx:id="dashboardPane" spacing="30">
                <Label fx:id="welcomeLabel" text="Hi, Customer"
                       style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2A3E4C;" />

                <!-- ACCOUNT CARDS -->
                <HBox spacing="25">

                    <!-- Checking -->
                    <VBox fx:id="checkingCard" spacing="8" prefWidth="320"
                          onMouseClicked="#handleSelectChecking"
                          style="-fx-background-color: #113C2B; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8,0,0,3);">
                           <Label fx:id="checkingBalanceLabel" text="₱1,236.32"
                               style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: white;" />
                        <Label fx:id="checkingNumberLabel" text="**** **** **** 6901"
                               style="-fx-text-fill:#cfe8dd;" />
                        <Label fx:id="checkingTypeLabel" text="Checking Account"
                               style="-fx-text-fill:#a8d5c1;" />
                    </VBox>

                    <!-- Savings -->
                    <VBox fx:id="savingsCard" spacing="8" prefWidth="320"
                          onMouseClicked="#handleSelectSavings"
                          style="-fx-background-color: #145237; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8,0,0,3);">
                           <Label fx:id="savingsBalanceLabel" text="₱23,000.00"
                               style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: white;" />
                        <Label fx:id="savingsNumberLabel" text="**** **** **** 3475"
                               style="-fx-text-fill:#cfe8dd;" />
                        <Label fx:id="savingsTypeLabel" text="Savings Account"
                               style="-fx-text-fill:#a8d5c1;" />
                    </VBox>

                    <!-- Investment -->
                    <VBox fx:id="investmentCard" spacing="8" prefWidth="320"
                          onMouseClicked="#handleSelectInvestment"
                          style="-fx-background-color: #1A6947; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 8,0,0,3);">
                           <Label fx:id="investmentBalanceLabel" text="₱85,400.00"
                               style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: white;" />
                        <Label fx:id="investmentNumberLabel" text="**** **** **** 9821"
                               style="-fx-text-fill:#cfe8dd;" />
                        <Label fx:id="investmentTypeLabel" text="Investment Account"
                               style="-fx-text-fill:#a8d5c1;" />
                    </VBox>

                </HBox>

                <!-- TRANSACTIONS TABLE -->
                <VBox spacing="15"
                      style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10,0,0,4);">
                    <Label text="Latest Transactions"
                           style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill:#2A3E4C;" />

                    <TableView fx:id="transactionsTable" prefHeight="230">
                        <columns>
                            <TableColumn text="Date" prefWidth="120"/>
                            <TableColumn text="From" prefWidth="150"/>
                            <TableColumn text="To" prefWidth="150"/>
                            <TableColumn text="Amount" prefWidth="120"/>
                        </columns>
                    </TableView>
                </VBox>
            </VBox>



            <!-- ====================== SEND MONEY ====================== -->
            <VBox fx:id="sendMoneyPane" spacing="25" visible="false" managed="false"
                  style="-fx-background-color:white; -fx-padding:30; -fx-background-radius:15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 8,0,0,3);">

                <Label text="Send Money"
                       style="-fx-font-size:26px; -fx-font-weight:bold; -fx-text-fill:#2A3E4C;" />

                <GridPane hgap="20" vgap="18">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="30" />
                        <ColumnConstraints percentWidth="70" />
                    </columnConstraints>

                    <Label text="Payee Account:" GridPane.rowIndex="0" />
                    <TextField fx:id="payeeField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                    <Label text="Amount:" GridPane.rowIndex="1" />
                    <TextField fx:id="sendAmountField" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                    <Label text="Message:" GridPane.rowIndex="2" />
                    <TextField fx:id="messageField" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                    <Button text="Send" onAction="#handleSendMoney"
                            GridPane.rowIndex="3" GridPane.columnIndex="1"
                            style="-fx-background-color:#0F2B21; -fx-text-fill:white; -fx-padding:10 35; -fx-background-radius:10;" />
                </GridPane>
            </VBox>



            <!-- ====================== TRANSACTION TOOLS ====================== -->
            <VBox fx:id="transactionsPane" spacing="22" visible="false" managed="false"
                  style="-fx-background-color:white; -fx-padding:25; -fx-background-radius:15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 8,0,0,3);">

                <Label text="Transactions"
                       style="-fx-font-size:22px; -fx-font-weight:bold; -fx-text-fill:#2A3E4C;" />

                <GridPane hgap="15" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="30" />
                        <ColumnConstraints percentWidth="70" />
                    </columnConstraints>

                    <Label text="Account:" GridPane.rowIndex="0" />
                    <ComboBox fx:id="accountsCombo" prefWidth="300"
                              GridPane.rowIndex="0" GridPane.columnIndex="1" />

                    <Label text="Amount:" GridPane.rowIndex="1" />
                    <TextField fx:id="amountField" GridPane.rowIndex="1" GridPane.columnIndex="1" />

                    <Label text="Transfer To:" GridPane.rowIndex="2" />
                    <TextField fx:id="transferTargetField" GridPane.rowIndex="2" GridPane.columnIndex="1" />

                    <HBox spacing="12" GridPane.rowIndex="3" GridPane.columnIndex="1">
                        <Button fx:id="depositButton" text="Deposit" onAction="#handleDeposit"
                                style="-fx-background-color:#1D8F57; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:8;" />
                        <Button fx:id="withdrawButton" text="Withdraw" onAction="#handleWithdraw"
                                style="-fx-background-color:#E67E22; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:8;" />
                        <Button fx:id="transferButton" text="Transfer" onAction="#handleTransfer"
                                style="-fx-background-color:#3498DB; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:8;" />
                    </HBox>
                </GridPane>
            </VBox>



            <!-- ====================== ACCOUNT MANAGEMENT ====================== -->
            <VBox fx:id="accountsPane" spacing="25" visible="false" managed="false"
                  style="-fx-background-color:white; -fx-padding:30; -fx-background-radius:15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 8,0,0,3);">

                <Label text="Account Management"
                       style="-fx-font-size:26px; -fx-font-weight:bold; -fx-text-fill:#2A3E4C;" />

                <Button text="Open New Account"
                        onAction="#handleOpenAccountForCustomer"
                        style="-fx-background-color:#1A6947; -fx-text-fill:white; -fx-padding:10 30; -fx-background-radius:10;" />

                <TableView fx:id="accountsTable" prefHeight="350">
                    <columns>
                        <TableColumn text="Account Number" prefWidth="200"/>
                        <TableColumn text="Type" prefWidth="150"/>
                        <TableColumn text="Balance" prefWidth="150"/>
                    </columns>
                </TableView>
            </VBox>

        </StackPane>

    </center>

</BorderPane>
